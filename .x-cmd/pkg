
pkg(){
    local op="$1";  shift
    case "$op" in
        ls|json2yml)             "pkg_$op" "$@" ;;
    esac
}


pkg_ls()(
    cd $(x ws root)/src
    find . -name '*.json'
)

pkg_json2yml()(
    echo hi
    cd $(x ws root)/src
    find . -name '*.json' | while read -r line; do
        p=${line%.json}.yml
        cat $line | x yq -o yaml e -P >$p
        rm "$line"
    done
)

[ "$#" -gt 0 ] && pkg "$@"

