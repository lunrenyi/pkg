generate_mdtable_net()(
    x:info "Generate: markdown table"
    printf "%s\n" "| candidate \\ osarch | linux/x64 | linux/arm64 | darwin/x64 | darwin/arm64 | win/x64 | 备注 |"
    printf "%s\n" "| ------------------ | ----------- | ------------ | ---------- | --------- | ------- | ---- |"

    cd $(x wsroot)/src

    for dir in *; do
    (
        cd "$dir" || continue

        for pkg in *; do
            (
                echo $pkg >&2
                version="$(___x_cmd_pkg_default_version $pkg)"
                printf "|%s " "$pkg"
                while read -r osarch; do
                     url="$(___x_cmd_pkg___list "$pkg" "$version" "$osarch" "url.cn")"
                     return_code="$(curl --silent --max-time 10 -I "$url" | grep -E "^HTTP" | awk -F " " '{print $2}' | tail -n 1)"


                if [ "$osarch" = "linux/x64" ]; then
                    if [ "$return_code" = "200" ] || [ "$return_code" = "302" ];then
                        printf "| %s " "ok"
                    else
                        printf "| %s" "x"
                    fi
                fi
                if [ "$osarch" = "linux/arm64" ]; then
                    if [ "$return_code" = "200" ] || [ "$return_code" = "302" ];then
                        printf "| %s " "ok"
                    else
                        printf "| %s" "x"
                    fi
                fi
                if [ "$osarch" = "darwin/x64" ]; then
                    if [ "$return_code" = "200" ] || [ "$return_code" = "302" ];then
                        printf "| %s " "ok"
                    else
                        printf "| %s" "x"
                    fi
                fi
                if [ "$osarch" = "darwin/arm64" ]; then
                    if [ "$return_code" = "200" ] || [ "$return_code" = "302" ];then
                        printf "| %s " "ok"
                    else
                        printf "| %s" "x"
                    fi
                fi
                if [ "$osarch" = "win/x64" ]; then
                    if [ "$return_code" = "200" ] || [ "$return_code" = "302" ];then
                        printf "| %s " "ok"
                    else
                        printf "| %s" "x"
                    fi
                fi


                done <<A
linux/x64
linux/arm64
darwin/x64
darwin/arm64
win/x64
A
     echo "|"
            )
        done

    )
done
) > $(x wsroot)/.x-cmd/dev/README.md